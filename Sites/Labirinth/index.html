<!--
Labirinth game.

Copyright Joy Developing.

P.S. Just try to modify from the phone.
-->

<!DOCTYPE html>
<html>
    <head>
        <title>Labirinth</title>
        <style>

body
{
    font-family : Verdana
}

        </style>
        <script src="../../JD/String.js"></script>
        <script src="../../JD/Utils.js"></script>
        <script src="../../JD/Maths.js"></script>
        <script src="../../JD/Drawer.js"></script>
        <script src="../../JD/Content.js"></script>
        <script src="../../JD/Array.js"></script>
        <script src="Cell.js"></script>
        <script src="Board.js"></script>
        <script src="Game.js"></script>
        <script>

<!--

// Game.
var G;

//--------------------------------------------------------------------------------------------------

// Init.
function Init()
{
    G = new Game(document);

    with (G.GetBoard())
    {
        ConstructRandomLabirinth();
    }

    G.Draw(true);
}

//--------------------------------------------------------------------------------------------------

// Load document.
function OnLoad()
{
    Init();
}

//--------------------------------------------------------------------------------------------------

// Key down.
//
// Arguments:
//   e - event attributes.
function OnKeyDown(e)
{
    switch (e.keyCode)
    {
        case 39:
            OnRightArrowKeyDown();
            break;

        case 37:
            OnLeftArrowKeyDown();
            break;

        case 38:
            OnUpArrowKeyDown();
            break;

        case 40:
            OnDownArrowKeyDown();
            break;

        case 32:
            OnSpaceKeyDown();
            break;

        // No reaction on other keys down events.
        default:
            break;
    }
}

//--------------------------------------------------------------------------------------------------

// Right arrow key down.
function OnRightArrowKeyDown()
{
    if (G.IsStart())
    {
        if (G.IsHumanLeftFromExit())
        {
            G.Status = "end";
            G.Draw(false);
        }
        else
        {
            G.GoRight();
            G.Draw(true);
        }
    }
}

//--------------------------------------------------------------------------------------------------

// Left arrow key down.
function OnLeftArrowKeyDown()
{
    if (G.IsStart())
    {
        G.GoLeft();
        G.Draw(true);
    }
}

//--------------------------------------------------------------------------------------------------

// Up arrow key down.
function OnUpArrowKeyDown()
{
    if (G.IsStart())
    {
        G.GoUp();
        G.Draw(true);
    }
}

//--------------------------------------------------------------------------------------------------

// Down arrow key down.
function OnDownArrowKeyDown()
{
    if (G.IsStart())
    {
        G.GoDown();
        G.Draw(true);
    }
}

//--------------------------------------------------------------------------------------------------

// Space key down.
function OnSpaceKeyDown()
{
    if (G.IsEnd())
    {
        Init();
    }
}

//--------------------------------------------------------------------------------------------------

// Restart game.
function Restart()
{
    Init();
}

//--------------------------------------------------------------------------------------------------

-->

        </script>
    </head>
    <body onload="OnLoad()" onkeydown="OnKeyDown(event)">
        <table cellpadding="0" cellspacing="0">
            <tr>
                <td>
                    <canvas width="350" height="40" id="info"></canvas>
                </td>
            </tr>
            <tr>
                <td>
                    <canvas width="350" height="350" id="canvas"></canvas>
                </td>
            </tr>
        </table>

        <br>
        <table>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td><input type="button" value="restart" onclick="Restart()"></td>
        </tr>
        <tr>
            <td>Field size :</td>
            <td><input type="text" id="rows" value="20"></td>
            <td><input type="text" id="cols" value="20"></td>
        </tr>
        </table>
    </body>
</html>



